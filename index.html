<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KenariCoin Wallet Connect</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body { background: #0b0f19; color: #fff; font-family: Arial, sans-serif; text-align: center; padding: 40px; }
    .btn { background: #00ff99; color: #000; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; border: none; }
    .btn:hover { background: #00cc77; }
    #walletInfo { margin-top: 20px; padding: 15px; background: #111827; border-radius: 10px; display: none; }
  </style>
</head>
<body>
  <h1>ðŸš€ KenariCoin Wallet Connect</h1>

  <button class="btn" onclick="openAllWallets()">ðŸ”— Connect All Wallets</button>
  <div id="walletInfo"></div>

  <script type="module">
    import { Web3Modal } from "https://cdn.jsdelivr.net/npm/@web3modal/html@2.7.1/dist/index.umd.js"
    import { EthereumClient, w3mConnectors, w3mProvider } from "https://cdn.jsdelivr.net/npm/@web3modal/ethereum@2.7.1/dist/index.umd.js"
    import { configureChains, createConfig, getAccount, watchAccount } from "https://cdn.jsdelivr.net/npm/@wagmi/core@1.3.6/dist/index.umd.js"

    // === BSC Chain Config ===
    const bsc = {
      id: 56,
      name: "BNB Smart Chain",
      network: "bsc",
      nativeCurrency: { name: "BNB", symbol: "BNB", decimals: 18 },
      rpcUrls: { default: { http: ["https://bsc-dataseed.binance.org/"] } },
      blockExplorers: { default: { name: "BscScan", url: "https://bscscan.com" } }
    }

    const projectId = "04d95c797b104ad69d34f7e2feccf794"

    // Wagmi setup
    const { publicClient } = configureChains([bsc], [w3mProvider({ projectId })])

    const wagmiConfig = createConfig({
      autoConnect: true,
      connectors: w3mConnectors({ projectId, chains: [bsc] }),
      publicClient
    })

    const ethereumClient = new EthereumClient(wagmiConfig, [bsc])

    // Web3Modal resmi
    window.web3Modal = new Web3Modal(
      {
        projectId,
        themeMode: "dark",
        themeVariables: {
          "--w3m-accent-color": "#00ff99",
          "--w3m-background-color": "#1a1f2e"
        }
      },
      ethereumClient
    )

    // Fungsi tombol
    window.openAllWallets = async function () {
      window.web3Modal.openModal()
    }

    // Update info kalau wallet connect
    watchAccount(wagmiConfig, {
      onChange(account) {
        if (account?.address) {
          document.getElementById("walletInfo").style.display = "block"
          document.getElementById("walletInfo").innerHTML =
            `âœ… Connected: <b>${account.address}</b> (BSC)`
        }
      }
    })
  </script>
</body>
</html>
